---
applyTo: "**/*.py"
---

# Python 注释的标准指南

！！！注释使用中文！！！
Python 的注释标准主要参考 PEP 8（风格指南）和 PEP 257（docstring 约定），强调清晰、简洁、一致性和必要性。
Python 注释请遵循 Google Style， 因为它在业界广泛使用，且易于工具解析（如 Sphinx、Doxygen）。Google 风格的 docstring 结构清晰，便于生成文档。

## 注释的基本原则

1. 必要性：只写必要的注释。避免注释明显的事实（如 # i = 0  # 设置 i 为 0），而是解释“为什么”（why）而不是“什么”（what）。例如，解释业务逻辑、算法选择或潜在的边缘情况。
2. 语言：中文优先以便于工具（如 GitHub Copilot）生成和协作。
3. 一致性：整个项目使用统一的注释风格（如缩进、标点）。使用工具如 pylint 或 black 来强制执行。
4. 更新性：注释必须与代码同步更新。过时的注释比没有注释更糟。
5. 位置：注释应靠近相关代码，通常在同一行或上方。避免在代码末尾添加无关注释。
6. 长度：单行注释不超过 72 字符（PEP 8 推荐），多行注释保持简短。

## 文档字符串（Docstrings）：Google 风格

1. 使用三引号 """ 或 ''' 包围，用于模块、类、函数和方法的文档。
2. 符合 PEP 257：第一行是单行摘要，其后是空行，然后是详细描述。
3. 支持多种风格，如 Google、NumPy 或 reStructuredText（Sphinx 支持）。工程实践中，选择一种并一致使用（推荐 Google 风格，便于工具解析）。
4. 包括参数、返回类型、异常等（使用 type hints 增强）。

## 工程实践中的最佳规则

1. 可读性：使用完整句子，首字母大写，结尾加句号。避免缩写，除非是标准术语（如 API、HTTP）。
2. TODO/FIXME：使用标准标记如 # TODO: 实现缓存优化 或 # FIXME: 处理边界情况，便于工具（如 IDE）追踪。
3. 类型提示集成：结合 PEP 484 的 type hints（如 def func(x: int) -> str:），减少注释需求，但 docstring 仍需解释语义。
4. 避免冗余：如果代码自解释（如使用描述性变量名），无需注释。优先重构代码使其更清晰。
5. 测试与文档：注释应支持生成文档（如用 Sphinx）。在 CI/CD 中检查注释覆盖率。