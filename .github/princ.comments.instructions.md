---
applyTo: "**/*.py"
---

# Python 注释 / Docstring 规则

硬规则（必须遵守）：
1) 注释、docstring、日志文本使用中文。
2) 注释写“为什么/约束/边界条件”，不重复代码表面含义。
3) 改代码时同步更新注释；发现过时注释必须修正或删除。
4) 任何“对外可见”的函数/类/模块：必须有 docstring（Google 风格），至少包含：一句话摘要 + 关键语义说明。
5) 参数/返回/异常：只写对调用者有用的信息（语义、单位、取值范围、失败条件），不要堆砌显而易见的类型（类型优先用 type hints 表达）。
6) TODO/FIXME 必须带原因与触发条件（最好带清理标准），例如：`# TODO: ...（当XXX完成后删除）`
7) 不做“只改注释不改代码”的大范围噪声提交；注释改动应与功能/修复/重构绑定。
8) 行宽遵循仓库现有格式化配置（如 pyproject.toml）；若未找到配置，保持合理换行即可，不强行卡 72。
9) （VS Code 折叠）当单文件较长且存在多个逻辑“章节”时，使用 `#region <标题>` / `#endregion` 标注可折叠章节。
   - 必须成对出现、不可缺失；允许嵌套但不超过 2 层。
   - 标题必须简短、稳定、表达“章节职责”（如 Imports/Constants/Helpers/Public API/CLI 等）。
   - 不要在短函数内部滥用 region；不要用 region 掩盖“该拆分模块但没拆”的结构问题。

推荐项（有条件执行）：
- 关键算法/数学推导：在 docstring 里补“输入输出定义 + 关键假设 + 误差来源/退化条件”。
- 复杂分支：在分支前写一行注释说明分支存在的工程原因（兼容性/性能/数据质量等）。

#region 用法模板（推荐）
#region Imports
# ... imports ...
#endregion

#region Public API
def foo(...):
    """一句话摘要

    Args:
        ...
    Returns:
        ...
    Raises:
        ...
    """
    ...
#endregion
