---
applyTo: "**"
---

# Copilot 会话日志（本地 tmp）

目标：为了便于回溯与复用，在每个聊天会话中维护一份本地临时 Markdown 日志，记录 Copilot 的回复要点。

约束：
- 日志文件仅用于本地使用，路径固定为：`tmp/copilot_session.md`。
- 禁止记录任何密钥、Token、个人隐私、或可能敏感的原始数据内容；如必须提及，仅写“已省略”。
- 避免把大段代码/长输出原样写进日志；优先记录结论、关键路径、关键符号（函数/类名）与验证方式。

写入规则（强制）：
- 在每次给出对用户的最终回复之前，将“本次回复”的摘要追加到 `tmp/copilot_session.md` 末尾。
- 若 `tmp/copilot_session.md` 不存在，则先创建文件与目录，并写入标题与“会话开始时间”。
- 单条记录应当尽量短（建议 ≤ 30 行），默认只写摘要；若用户明确要求“逐字记录/全文记录”，才写入完整回复正文。

单条记录格式（建议）：
- 时间：ISO8601（例如 `2026-02-06T12:34:56+08:00`）
- 用户诉求：1-2 句概述
- Copilot 输出：要点列表（结论/步骤/注意事项）
- 涉及文件：本次提及或修改的路径（若有）
- 验证方式：跑了哪些测试/命令（若有；不要包含密钥）

可选的会话切分：
- 当用户说“新会话/重置日志/清空日志”时：覆盖重建 `tmp/copilot_session.md`，重新写入标题与新的会话开始时间。
