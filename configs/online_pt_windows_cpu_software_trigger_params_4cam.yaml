# 在线 3D 定位配置（Windows/CPU，软件触发；使用你归档的四相机内外参）
#
# 用法示例（任选其一）：
# - uv run python -m tennis3d.apps.online --config configs/online_pt_windows_cpu_software_trigger_params_4cam.yaml
# - tennis3d-online --config configs/online_pt_windows_cpu_software_trigger_params_4cam.yaml

# SDK DLL 目录（按你的本机 SDK 安装位置调整；留空表示使用系统 PATH）
dll_dir:

# 参与采集与定位的相机序列号（必须与标定文件 cameras 的 key 一致）
serials:
  - DA8199303
  - DA8199402
  - DA8199243
  - DA8199285

# 标定文件：由 data/calibration/inputs/2026-01-30/*.json 融合生成（单位：m）
calib: data/calibration/params_4cam_calib.json

detector: pt
model: data/models/best.pt

# 软件裁剪（动态 ROI，可选）：在 detector 前裁剪小窗口以提高吞吐。
# detector_crop_size: 640
# detector_crop_smooth_alpha: 0.2
# detector_crop_max_step_px: 120
# detector_crop_reset_after_missed: 8
min_score: 0.25
require_views: 2
max_detections_per_camera: 10
max_reproj_error_px: 10.0
max_uv_match_dist_px: 25.0
merge_dist_m: 0.08

# 在线分组方式：frame_num/trigger_index/sequence
# frame_num 对应“同一帧号为一组”，最常用。
group_by: frame_num

timeout_ms: 1000
group_timeout_ms: 1000
max_pending_groups: 256
max_groups: 0

# 触发配置（纯软件触发示例；如需主从触发请改用 configs/online_master_slave_line0.yaml 的写法）
trigger:
  trigger_source: Software
  soft_trigger_fps: 5.0

time_sync_mode: dev_timestamp_mapping

# 输出路径（可选；不写则在线模式默认不落盘）
out_jsonl: data/tools_output/online_positions_3d.params_4cam.jsonl
